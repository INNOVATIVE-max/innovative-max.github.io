<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ec4899">
    <title>El Impostor - Juego de Palabras</title>
    
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2286351936295395"
     crossorigin="anonymous"></script>
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1a0a1e 0%, #2d1b3d 50%, #4a1942 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s;
        }

        body.dark {
            background: linear-gradient(135deg, #0a0610 0%, #1a0a1e 100%);
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .card {
            background: rgba(26, 10, 30, 0.8);
            border: 1px solid rgba(236, 72, 153, 0.3);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            color: white;
        }

        body.dark .card {
            background: rgba(10, 6, 16, 0.9);
            border-color: rgba(236, 72, 153, 0.4);
            color: white;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-icon {
            font-size: 80px;
            animation: pulse 2s infinite;
        }

        h1 {
            font-size: 48px;
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 16px 0 8px;
        }

        h2 {
            font-size: 32px;
            font-weight: 900;
            color: #ec4899;
            margin-bottom: 20px;
        }

        body.dark h2 {
            color: #ec4899;
        }

        .subtitle {
            text-align: center;
            color: white;
            font-size: 18px;
        }

        .btn {
            width: 100%;
            padding: 16px;
            font-size: 18px;
            font-weight: 700;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            margin-bottom: 12px;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: scale(1.02);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
            color: white;
        }

        .btn-secondary {
            background: rgba(26, 10, 30, 0.8);
            border: 1px solid rgba(236, 72, 153, 0.5);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid rgba(236, 72, 153, 0.3);
            background: rgba(26, 10, 30, 0.6);
            border-radius: 12px;
            margin-bottom: 12px;
            color: white;
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        body.dark input {
            background: rgba(10, 6, 16, 0.8);
            border-color: rgba(236, 72, 153, 0.4);
            color: white;
        }

        select {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid rgba(236, 72, 153, 0.3);
            background: rgba(26, 10, 30, 0.6);
            font-size: 16px;
            color: white;
        }

        select option {
            background: #1a0a1e;
            color: white;
        }

        .player-item {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(239, 68, 68, 0.2) 100%);
            border: 1px solid rgba(236, 72, 153, 0.3);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        body.dark .player-item {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.3) 0%, rgba(239, 68, 68, 0.3) 100%);
            border-color: rgba(236, 72, 153, 0.4);
        }

        .package-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .package-item {
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            color: white;
        }

        .package-item:hover {
            transform: scale(1.05);
        }

        .package-item.selected {
            box-shadow: 0 0 0 4px #fbbf24;
        }

        .package-icon {
            font-size: 48px;
            margin-bottom: 8px;
        }

        .settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid rgba(236, 72, 153, 0.3);
            background: rgba(26, 10, 30, 0.8);
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            z-index: 100;
        }

        body.dark .settings-btn {
            background: rgba(10, 6, 16, 0.9);
            border-color: rgba(236, 72, 153, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(26, 10, 30, 0.95);
            border: 1px solid rgba(236, 72, 153, 0.3);
            border-radius: 24px;
            padding: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            color: white;
        }

        body.dark .modal-content {
            background: rgba(10, 6, 16, 0.98);
            border-color: rgba(236, 72, 153, 0.4);
            color: white;
        }

        .ad-banner {
            background: rgba(26, 10, 30, 0.6);
            border: 1px solid rgba(236, 72, 153, 0.2);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }

        body.dark .ad-banner {
            background: rgba(10, 6, 16, 0.8);
            border-color: rgba(236, 72, 153, 0.3);
            color: white;
        }

        .ad-content {
            background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
        }

        .btn-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .reveal-screen {
            text-align: center;
            color: white;
        }

        .reveal-icon {
            font-size: 100px;
            margin-bottom: 20px;
        }

        .word-display {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
        }

        .word-text {
            font-size: 48px;
            font-weight: 900;
            color: #10b981;
        }

        .timer {
            font-size: 48px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 16px;
        }

        .eliminated {
            opacity: 0.4;
            position: relative;
        }

        .eliminated::after {
            content: 'üíÄ ELIMINADO';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            font-weight: 900;
            color: #ef4444;
            background: rgba(0,0,0,0.8);
            padding: 8px 16px;
            border-radius: 8px;
            border: 2px solid #ef4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="position: fixed; top: 20px; right: 20px; display: flex; gap: 8px; z-index: 100;">
            <button class="settings-btn" onclick="toggleDark()" id="darkBtn">üåô</button>
            <button class="settings-btn" onclick="showDonation()">‚ù§Ô∏è</button>
        </div>

        <!-- HOME -->
        <div id="home" class="screen active">
            <div class="logo">
                <div class="logo-icon">üé≠</div>
                <h1>El Impostor</h1>
                <p class="subtitle">¬øQui√©n es el impostor?</p>
            </div>

            <div class="ad-banner">
                <div style="font-size: 10px; color: #9ca3af; margin-bottom: 8px;">Publicidad</div>
                <div class="ad-content">
                    <p style="font-weight: 700;">üì± Espacio Publicitario</p>
                    <p style="font-size: 14px; opacity: 0.9;">Google AdMob aqu√≠</p>
                </div>
            </div>

            <button class="btn btn-primary" onclick="goTo('players')">‚ñ∂Ô∏è Iniciar Juego</button>
            <button class="btn btn-secondary" onclick="goTo('packages')">üì¶ Ver Paquetes (12 GRATIS)</button>
            <button class="btn btn-secondary" onclick="goTo('rules')">üìñ C√≥mo Jugar</button>
            <button class="btn btn-secondary" onclick="showDonation()">‚ù§Ô∏è Apoyar</button>

            <div style="text-align: center; color: white; margin-top: 20px; opacity: 0.7;">
                <p>v2.0 - 100% Gratis</p>
            </div>
        </div>

        <!-- PLAYERS -->
        <div id="players" class="screen">
            <h2 style="color: white; text-align: center;">üë• Jugadores</h2>
            
            <div class="card">
                <input type="text" id="nameInput" placeholder="Nombre del jugador" maxlength="20">
                <button class="btn btn-primary" onclick="addPlayer()">‚ûï Agregar</button>
                
                <div id="playerList"></div>

                <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid rgba(236, 72, 153, 0.3);">
                    <label style="display: block; font-weight: 700; margin-bottom: 8px; color: white;">N√∫mero de impostores:</label>
                    <select id="impostorCount">
                        <option value="1">1 impostor üî¥</option>
                    </select>
                </div>
            </div>

            <div class="btn-row">
                <button class="btn btn-secondary" onclick="goTo('home')">Atr√°s</button>
                <button class="btn btn-primary" onclick="goTo('packages')" id="continueBtn">Continuar</button>
            </div>
        </div>

        <!-- PACKAGES -->
        <div id="packages" class="screen">
            <h2 style="color: white; text-align: center;">üì¶ Paquetes</h2>

            <div class="card">
                <p style="font-weight: 900; font-size: 18px;">üéâ Todos GRATIS</p>
                <p style="opacity: 0.7;">12 paquetes ‚Ä¢ 240 palabras</p>
            </div>

            <div class="package-grid" id="packageGrid"></div>

            <div class="ad-banner">
                <div style="font-size: 10px; color: #9ca3af; margin-bottom: 8px;">Publicidad</div>
                <div class="ad-content">
                    <p style="font-weight: 700;">üì± Banner Publicitario</p>
                </div>
            </div>

            <div class="btn-row">
                <button class="btn btn-secondary" onclick="backPackages()">Atr√°s</button>
                <button class="btn btn-primary" onclick="startGame()" id="startBtn">‚ö° Iniciar</button>
            </div>
        </div>

        <!-- REVEAL -->
        <div id="reveal" class="screen"></div>

        <!-- PLAYING -->
        <div id="playing" class="screen"></div>

        <!-- RULES -->
        <div id="rules" class="screen">
            <div class="card">
                <h2>üìñ C√≥mo Jugar</h2>
                
                <div style="background: rgba(236, 72, 153, 0.2); border: 1px solid rgba(236, 72, 153, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                    <h3 style="margin-bottom: 8px;">üéØ Objetivo</h3>
                    <p>Los tripulantes descubren al impostor. El impostor descubre la palabra.</p>
                </div>

                <div style="background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                    <h3 style="margin-bottom: 8px;">üë• Roles</h3>
                    <p><strong>Tripulantes:</strong> Conocen la palabra. Dan pistas sutiles.</p>
                    <p style="margin-top: 8px;"><strong>Impostor:</strong> NO conoce la palabra. Debe fingir.</p>
                </div>

                <div style="background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                    <h3 style="margin-bottom: 8px;">üéÆ Juego</h3>
                    <ol style="padding-left: 20px; line-height: 1.8;">
                        <li>Cada jugador ve su rol en secreto</li>
                        <li>Por turnos dan pistas</li>
                        <li>Votan qui√©n es el impostor</li>
                        <li>Se revela la verdad</li>
                    </ol>
                </div>

                <div style="background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                    <h3 style="margin-bottom: 8px;">‚ö†Ô∏è Importante</h3>
                    <p style="font-weight: 700;">¬°NO mires la pantalla de otros! ü§´</p>
                </div>

                <button class="btn btn-primary" onclick="goTo('home')">Entendido</button>
            </div>
        </div>

        <!-- DONATION MODAL -->
        <div id="donationModal" class="modal">
            <div class="modal-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 64px;">‚ù§Ô∏è</div>
                    <h2>¬°Apoya el Juego!</h2>
                    <p style="opacity: 0.7;">Si disfrutas El Impostor</p>
                </div>

                <a href="https://paypal.com" target="_blank" class="btn" style="background: #0070ba; color: white; text-decoration: none; display: block;">üí≥ PayPal</a>
                <a href="" target="_blank" class="btn" style="background: linear-gradient(135deg, #ef4444, #ec4899); color: white; text-decoration: none; display: block;">‚òï Nequi</a>
                <a href="https://patreon.com/Itz_JuanJo?utm_medium=unknown&utm_source=join_link&utm_campaign=creatorshare_creator&utm_content=copyLink" target="_blank" class="btn" style="background: #f96854; color: white; text-decoration: none; display: block;">üé® Patreon</a>

                <div style="background: rgba(254, 243, 199, 0.2); border: 1px solid rgba(251, 191, 36, 0.3); padding: 16px; border-radius: 12px; margin-bottom: 16px; text-align: center;">
                    <p style="font-size: 14px; font-weight: 600;">Tu apoyo mantiene el juego gratis üôè</p>
                </div>

                <button class="btn btn-secondary" onclick="hideDonation()">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        var game = {
            players: [],
            packages: [
                { id: 'animals', name: 'Animales', icon: 'üê∂', words: ['Perro', 'Gato', 'Elefante', 'Le√≥n', 'Tigre', 'Jirafa', 'Mono', '√Åguila', 'Delf√≠n', 'Ping√ºino'], bg: '#10b981' },
                { id: 'food', name: 'Comidas', icon: 'üçï', words: ['Pizza', 'Hamburguesa', 'Sushi', 'Tacos', 'Pasta', 'Helado', 'Ensalada', 'Arroz', 'Pollo', 'Carne'], bg: '#f97316' },
                { id: 'objects', name: 'Objetos', icon: 'üî®', words: ['Martillo', 'Tijeras', 'L√°piz', 'Reloj', 'Espejo', 'Llave', 'Paraguas', 'Maleta', 'Celular', 'Computadora'], bg: '#3b82f6' },
                { id: 'countries', name: 'Pa√≠ses', icon: 'üåç', words: ['Colombia', 'Brasil', 'M√©xico', 'Espa√±a', 'Francia', 'Italia', 'Jap√≥n', 'China', 'Australia', 'Canad√°'], bg: '#14b8a6' },
                { id: 'movies', name: 'Pel√≠culas', icon: 'üé¨', words: ['Titanic', 'Avatar', 'Matrix', 'Inception', 'Gladiador', 'Rocky', 'Joker', 'Frozen', 'Coco', 'Toy Story'], bg: '#9333ea' },
                { id: 'brands', name: 'Marcas', icon: 'üëï', words: ['Nike', 'Adidas', 'Apple', 'Samsung', 'Coca-Cola', 'Pepsi', 'McDonalds', 'Ferrari', 'BMW', 'Tesla'], bg: '#eab308' },
                { id: 'horror', name: 'Terror', icon: 'üëª', words: ['Vampiro', 'Zombie', 'Fantasma', 'Bruja', 'Demonio', 'Momia', 'Hombre Lobo', 'Payaso', 'Mu√±eca', 'Esqueleto'], bg: '#b91c1c' },
                { id: 'professions', name: 'Profesiones', icon: 'üë®‚Äç‚öïÔ∏è', words: ['Doctor', 'Profesor', 'Ingeniero', 'Arquitecto', 'Chef', 'Piloto', 'Bombero', 'Polic√≠a', 'Enfermera', 'Abogado'], bg: '#6366f1' },
                { id: 'sports', name: 'Deportes', icon: '‚öΩ', words: ['F√∫tbol', 'Baloncesto', 'Tenis', 'Nataci√≥n', 'B√©isbol', 'Voleibol', 'Golf', 'Boxeo', 'Ciclismo', 'Atletismo'], bg: '#16a34a' },
                { id: 'instruments', name: 'Instrumentos', icon: 'üé∏', words: ['Guitarra', 'Piano', 'Bater√≠a', 'Viol√≠n', 'Flauta', 'Trompeta', 'Saxof√≥n', 'Acorde√≥n', 'Arpa', 'Bajo'], bg: '#ec4899' },
                { id: 'vehicles', name: 'Veh√≠culos', icon: 'üöó', words: ['Carro', 'Moto', 'Bicicleta', 'Avi√≥n', 'Barco', 'Tren', 'Helic√≥ptero', 'Submarino', 'Cami√≥n', 'Bus'], bg: '#64748b' },
                { id: 'videogames', name: 'Videojuegos', icon: 'üéÆ', words: ['Minecraft', 'Fortnite', 'FIFA', 'Mario', 'Zelda', 'Pokemon', 'GTA', 'Call of Duty', 'Pac-Man', 'Tetris'], bg: '#8b5cf6' }
            ],
            selected: null,
            impostorCount: 1,
            gameData: null,
            currentIndex: 0,
            revealed: false,
            eliminated: []
        };

        function goTo(screen) {
            document.querySelectorAll('.screen').forEach(function(s) {
                s.classList.remove('active');
            });
            document.getElementById(screen).classList.add('active');
        }

        function toggleDark() {
            document.body.classList.toggle('dark');
            var btn = document.getElementById('darkBtn');
            btn.textContent = document.body.classList.contains('dark') ? '‚òÄÔ∏è' : 'üåô';
        }

        function showDonation() {
            document.getElementById('donationModal').classList.add('active');
        }

        function hideDonation() {
            document.getElementById('donationModal').classList.remove('active');
        }

        function addPlayer() {
            var input = document.getElementById('nameInput');
            var name = input.value.trim();
            if (name && game.players.length < 15) {
                game.players.push(name);
                input.value = '';
                updatePlayers();
            }
        }

        function removePlayer(i) {
            game.players.splice(i, 1);
            updatePlayers();
        }

        function updatePlayers() {
            var list = document.getElementById('playerList');
            var html = '';
            
            for (var i = 0; i < game.players.length; i++) {
                html += '<div class="player-item"><span>' + (i+1) + '. ' + game.players[i] + '</span><button onclick="removePlayer(' + i + ')" style="background: none; border: none; font-size: 20px; cursor: pointer;">üóëÔ∏è</button></div>';
            }
            
            list.innerHTML = html;

            var btn = document.getElementById('continueBtn');
            if (game.players.length >= 3) {
                btn.disabled = false;
                btn.style.opacity = '1';
            } else {
                btn.disabled = true;
                btn.style.opacity = '0.5';
            }

            var sel = document.getElementById('impostorCount');
            sel.innerHTML = '';
            var max = Math.min(3, game.players.length - 1);
            for (var j = 1; j <= max; j++) {
                sel.innerHTML += '<option value="' + j + '">' + j + ' impostor' + (j > 1 ? 'es' : '') + ' üî¥</option>';
            }
        }

        function backPackages() {
            if (game.players.length > 0) {
                goTo('players');
            } else {
                goTo('home');
            }
        }

        function renderPackages() {
            var grid = document.getElementById('packageGrid');
            var html = '';
            
            for (var i = 0; i < game.packages.length; i++) {
                var p = game.packages[i];
                var selected = game.selected === p.id ? 'selected' : '';
                html += '<div class="package-item ' + selected + '" style="background: ' + p.bg + ';" onclick="selectPackage(\'' + p.id + '\')">';
                html += '<div class="package-icon">' + p.icon + '</div>';
                html += '<div style="font-weight: 700;">' + p.name + '</div>';
                html += '<div style="font-size: 12px;">' + p.words.length + ' palabras</div>';
                html += '</div>';
            }
            
            grid.innerHTML = html;
            updateStartBtn();
        }

        function selectPackage(id) {
            game.selected = id;
            renderPackages();
        }

        function updateStartBtn() {
            var btn = document.getElementById('startBtn');
            if (game.selected && game.players.length >= 3) {
                btn.disabled = false;
                btn.style.opacity = '1';
            } else {
                btn.disabled = true;
                btn.style.opacity = '0.5';
            }
        }

        function startGame() {
            if (!game.selected || game.players.length < 3) return;

            game.impostorCount = parseInt(document.getElementById('impostorCount').value) || 1;
            game.eliminated = [];
            
            var pkg = null;
            for (var i = 0; i < game.packages.length; i++) {
                if (game.packages[i].id === game.selected) {
                    pkg = game.packages[i];
                    break;
                }
            }

            var word = pkg.words[Math.floor(Math.random() * pkg.words.length)];
            var shuffled = game.players.slice().sort(function() { return Math.random() - 0.5; });

            var impostorIndices = [];
            while (impostorIndices.length < game.impostorCount) {
                var idx = Math.floor(Math.random() * shuffled.length);
                if (impostorIndices.indexOf(idx) === -1) {
                    impostorIndices.push(idx);
                }
            }

            var roles = [];
            for (var j = 0; j < shuffled.length; j++) {
                roles.push({
                    name: shuffled[j],
                    isImpostor: impostorIndices.indexOf(j) !== -1,
                    word: word
                });
            }

            game.gameData = { roles: roles, word: word, pkg: pkg.name };
            game.currentIndex = 0;
            game.revealed = false;
            showReveal();
        }

        function showReveal() {
            var screen = document.getElementById('reveal');
            var role = game.gameData.roles[game.currentIndex];

            if (!game.revealed) {
                screen.innerHTML = '<div class="reveal-screen"><div class="card" style="margin-bottom: 20px;"><div style="font-size: 64px;">üë§</div><h2 style="color: #ec4899; font-size: 28px;">Turno de</h2><p style="font-size: 40px; font-weight: 900; color: #ec4899;">' + role.name + '</p><p>Jugador ' + (game.currentIndex + 1) + ' de ' + game.gameData.roles.length + '</p></div><div style="background: linear-gradient(135deg, #fbbf24, #f97316); padding: 20px; border-radius: 20px; margin-bottom: 20px;"><div style="font-size: 40px;">‚ö†Ô∏è</div><p style="font-weight: 900; font-size: 18px; color: #1f2937;">¬°NO MIRES LA PANTALLA!</p></div><button class="btn btn-primary" onclick="revealRole()">üëÅÔ∏è Ver mi rol</button></div>';
            } else {
                if (role.isImpostor) {
                    document.body.style.background = 'linear-gradient(135deg, #7f1d1d, #000000)';
                    screen.innerHTML = '<div class="reveal-screen"><div class="reveal-icon">üî¥</div><h1 style="font-size: 56px; font-weight: 900; color: #ef4444; margin-bottom: 20px;">IMPOSTOR</h1><div class="card" style="background: rgba(0,0,0,0.5); color: white; margin-bottom: 20px;"><p style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">¬°Eres el impostor!</p><p style="color: #fca5a5; font-weight: 600;">NO conoces la palabra</p><p style="margin-top: 8px;">Finge y desc√∫brela</p></div><button class="btn" style="background: white; color: #1f2937;" onclick="nextPlayer()">' + (game.currentIndex < game.gameData.roles.length - 1 ? 'Siguiente' : 'Jugar') + '</button></div>';
                } else {
                    document.body.style.background = 'linear-gradient(135deg, #059669, #3b82f6)';
                    screen.innerHTML = '<div class="reveal-screen"><div class="reveal-icon">‚úÖ</div><h1 style="font-size: 40px; font-weight: 900; margin-bottom: 16px;">Tripulante</h1><p style="font-size: 20px; font-weight: 700; margin-bottom: 12px;">La palabra es:</p><div class="word-display"><div class="word-text">' + role.word + '</div></div><div class="card" style="background: rgba(16,185,129,0.3); color: white; margin-bottom: 20px;"><p style="font-weight: 700;">üí° Da pistas sutiles</p></div><button class="btn" style="background: white; color: #1f2937;" onclick="nextPlayer()">' + (game.currentIndex < game.gameData.roles.length - 1 ? 'Siguiente' : 'Jugar') + '</button></div>';
                }
            }
            goTo('reveal');
        }

        function revealRole() {
            game.revealed = true;
            showReveal();
        }

        function nextPlayer() {
            game.revealed = false;
            if (game.currentIndex < game.gameData.roles.length - 1) {
                game.currentIndex++;
                document.body.style.background = 'linear-gradient(135deg, #1a0a1e, #0a0610)';
                showReveal();
            } else {
                document.body.style.background = 'linear-gradient(135deg, #1a0a1e, #2d1b3d, #4a1942)';
                showPlaying();
            }
        }

        function showPlaying() {
            var screen = document.getElementById('playing');
            screen.innerHTML = '<div style="text-align: center; margin-bottom: 40px;"><div style="font-size: 80px; margin-bottom: 20px;">üé≠</div><h1 style="color: white; font-size: 40px;">¬°A Jugar!</h1></div><div class="card" style="margin-bottom: 20px;"><h3 style="color: #ec4899; margin-bottom: 16px;">üìã Instrucciones</h3><ol style="line-height: 1.8; padding-left: 20px;"><li>Cada jugador da UNA pista</li><li>Tripulantes: sean sutiles</li><li>Impostor: finge conocer la palabra</li><li>Despu√©s de 2-3 rondas, voten</li><li>¬°Descubran al impostor!</li></ol></div><div class="ad-banner"><div style="font-size: 10px; color: #9ca3af; margin-bottom: 8px;">Publicidad</div><div class="ad-content"><p style="font-weight: 700;">üì± Banner</p></div></div><button class="btn btn-primary" onclick="showVoting()" style="font-size: 20px;">üó≥Ô∏è Iniciar Votaci√≥n</button><button class="btn btn-secondary" onclick="newRound()">üîÑ Nueva Ronda</button><button class="btn btn-secondary" onclick="resetGame()">üè† Inicio</button><div style="text-align: center; color: white; margin-top: 20px; opacity: 0.7;"><p>Paquete: ' + game.gameData.pkg + '</p></div>';
            goTo('playing');
        }

        function showVoting() {
            var screen = document.getElementById('playing');
            var html = '<div style="text-align: center; margin-bottom: 30px;"><div style="font-size: 64px; margin-bottom: 16px;">üó≥Ô∏è</div><h1 style="color: white; font-size: 36px; font-weight: 900;">Votaci√≥n</h1><p style="color: rgba(255,255,255,0.7); margin-top: 8px;">¬øQui√©n creen que es el impostor?</p></div><div class="card" style="margin-bottom: 20px;"><h3 style="color: #ec4899; margin-bottom: 20px; text-align: center;">Selecciona al sospechoso:</h3><div style="display: flex; flex-direction: column; gap: 12px;">';
            
            for (var i = 0; i < game.gameData.roles.length; i++) {
                var isEliminated = game.eliminated.indexOf(i) !== -1;
                var eliminatedClass = isEliminated ? 'eliminated' : '';
                var disabled = isEliminated ? 'disabled' : '';
                
                html += '<button onclick="votePlayer(' + i + ')" class="btn ' + eliminatedClass + '" ' + disabled + ' style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.3) 0%, rgba(239, 68, 68, 0.3) 100%); border: 2px solid rgba(236, 72, 153, 0.5); color: white; font-size: 20px; padding: 20px; display: flex; align-items: center; justify-content: space-between;"><span style="font-weight: 700;">' + game.gameData.roles[i].name + '</span><span style="font-size: 24px;">üë§</span></button>';
            }
            
            html += '</div></div>';
            
            // Mostrar jugadores eliminados
            if (game.eliminated.length > 0) {
                html += '<div class="card" style="background: rgba(127, 29, 29, 0.3); border-color: #ef4444;"><h3 style="color: #fca5a5; margin-bottom: 12px; font-size: 16px;">üíÄ Eliminados:</h3><div style="display: flex; flex-wrap: wrap; gap: 8px;">';
                for (var j = 0; j < game.eliminated.length; j++) {
                    var idx = game.eliminated[j];
                    html += '<span style="background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; padding: 6px 12px; border-radius: 8px; font-size: 14px; color: #fca5a5;">' + game.gameData.roles[idx].name + '</span>';
                }
                html += '</div></div>';
            }
            
            html += '<button class="btn btn-secondary" onclick="showPlaying()">‚¨ÖÔ∏è Volver</button>';
            screen.innerHTML = html;
        }

        function votePlayer(index) {
            // No permitir votar a jugadores ya eliminados
            if (game.eliminated.indexOf(index) !== -1) {
                return;
            }
            
            var votedPlayer = game.gameData.roles[index];
            var isImpostor = votedPlayer.isImpostor;
            
            if (isImpostor) {
                // Agregar impostor a eliminados
                game.eliminated.push(index);
                
                // Contar cu√°ntos impostores quedan
                var remainingImpostors = 0;
                for (var i = 0; i < game.gameData.roles.length; i++) {
                    if (game.gameData.roles[i].isImpostor && game.eliminated.indexOf(i) === -1) {
                        remainingImpostors++;
                    }
                }
                
                if (remainingImpostors === 0) {
                    // ¬°Victoria de los tripulantes! Todos los impostores eliminados
                    showVictory('crew', votedPlayer.name);
                } else {
                    // A√∫n quedan impostores
                    showCorrectVote(votedPlayer.name, remainingImpostors);
                }
            } else {
                // Votaron a un tripulante - agregarlo a eliminados
                game.eliminated.push(index);
                
                // Contar impostores y tripulantes restantes (no eliminados)
                var impostorCount = 0;
                var crewmateCount = 0;
                for (var i = 0; i < game.gameData.roles.length; i++) {
                    if (game.eliminated.indexOf(i) === -1) {
                        if (game.gameData.roles[i].isImpostor) {
                            impostorCount++;
                        } else {
                            crewmateCount++;
                        }
                    }
                }
                
                // Verificar si el impostor gan√≥
                if (crewmateCount <= impostorCount) {
                    // ¬°Victoria del impostor!
                    showVictory('impostor', votedPlayer.name);
                } else {
                    // El juego contin√∫a pero eliminaron a un inocente
                    showWrongVote(votedPlayer.name);
                }
            }
        }

        function showCorrectVote(playerName, remainingImpostors) {
            var screen = document.getElementById('playing');
            screen.innerHTML = '<div style="text-align: center; margin-bottom: 30px;"><div style="font-size: 80px; margin-bottom: 20px;">‚úÖ</div><h1 style="color: #10b981; font-size: 40px; font-weight: 900;">¬°Correcto!</h1></div><div class="card" style="background: linear-gradient(135deg, #065f46 0%, #064e3b 100%); border: 2px solid #10b981; margin-bottom: 20px; padding: 32px;"><div style="text-align: center; margin-bottom: 20px;"><p style="font-size: 24px; font-weight: 700; color: #6ee7b7; margin-bottom: 16px;">Eliminaron a:</p><div style="background: rgba(16, 185, 129, 0.2); border: 3px solid #10b981; padding: 20px; border-radius: 16px; font-size: 32px; font-weight: 900; color: #6ee7b7;">' + playerName + '</div></div><div style="margin-top: 24px; padding-top: 24px; border-top: 2px solid rgba(16, 185, 129, 0.3);"><p style="font-size: 20px; color: #6ee7b7; text-align: center; line-height: 1.6;"><strong>' + playerName + '</strong> era un <strong>IMPOSTOR</strong> üî¥</p><p style="color: rgba(110, 231, 183, 0.8); margin-top: 12px; text-align: center;">¬°Pero a√∫n quedan ' + remainingImpostors + ' impostor' + (remainingImpostors > 1 ? 'es' : '') + '!</p></div></div><button class="btn btn-primary" onclick="showVoting()" style="font-size: 20px;">üó≥Ô∏è Continuar Votando</button><button class="btn btn-secondary" onclick="revealAll()">üîç Revelar Todo</button><button class="btn btn-secondary" onclick="resetGame()">üè† Inicio</button>';
        }

        function showWrongVote(playerName) {
            var screen = document.getElementById('playing');
            screen.innerHTML = '<div style="text-align: center; margin-bottom: 30px;"><div style="font-size: 80px; margin-bottom: 20px;">üò±</div><h1 style="color: #fbbf24; font-size: 40px; font-weight: 900;">¬°Error!</h1></div><div class="card" style="background: linear-gradient(135deg, #92400e 0%, #78350f 100%); border: 2px solid #fbbf24; margin-bottom: 20px; padding: 32px;"><div style="text-align: center; margin-bottom: 20px;"><p style="font-size: 24px; font-weight: 700; color: #fcd34d; margin-bottom: 16px;">Eliminaron a:</p><div style="background: rgba(251, 191, 36, 0.2); border: 3px solid #fbbf24; padding: 20px; border-radius: 16px; font-size: 32px; font-weight: 900; color: #fcd34d;">' + playerName + '</div></div><div style="margin-top: 24px; padding-top: 24px; border-top: 2px solid rgba(251, 191, 36, 0.3);"><p style="font-size: 20px; color: #fcd34d; text-align: center; line-height: 1.6;"><strong>' + playerName + '</strong> era un <strong>TRIPULANTE</strong> üòî</p><p style="color: rgba(252, 211, 77, 0.8); margin-top: 12px; text-align: center;">¬°El impostor sigue entre ustedes!</p></div></div><button class="btn btn-primary" onclick="showVoting()" style="font-size: 20px;">üó≥Ô∏è Votar de Nuevo</button><button class="btn btn-secondary" onclick="revealAll()">üîç Revelar Todo</button><button class="btn btn-secondary" onclick="resetGame()">üè† Inicio</button>';
        }

        function showVictory(winner, votedPlayer) {
            var impostors = [];
            var crewmates = [];
            for (var i = 0; i < game.gameData.roles.length; i++) {
                if (game.gameData.roles[i].isImpostor) {
                    impostors.push(game.gameData.roles[i].name);
                } else {
                    crewmates.push(game.gameData.roles[i].name);
                }
            }
            
            var screen = document.getElementById('playing');
            var isCrewWin = winner === 'crew';
            var victoryColor = isCrewWin ? '#10b981' : '#ef4444';
            var victoryBg = isCrewWin ? 'linear-gradient(135deg, #1e5a4f 0%, #1e3a8a 100%)' : 'linear-gradient(135deg, #7f1d1d 0%, #450a0a 100%)';
            var victoryIcon = isCrewWin ? 'üéâ' : 'üíÄ';
            var victoryText = isCrewWin ? '¬°Victoria de los Tripulantes!' : '¬°Victoria del Impostor!';
            
            var html = '<div style="text-align: center; margin-bottom: 30px;"><div style="font-size: 80px; margin-bottom: 16px; animation: pulse 2s infinite;">' + victoryIcon + '</div><h1 style="color: ' + victoryColor + '; font-size: 40px; font-weight: 900; text-transform: uppercase;">' + victoryText + '</h1></div>';
            
            // Mostrar resultado de votaci√≥n final
            html += '<div class="card" style="background: ' + victoryBg + '; border: 2px solid ' + victoryColor + '; margin-bottom: 20px; padding: 24px;"><p style="text-align: center; font-size: 18px; color: rgba(255,255,255,0.9); margin-bottom: 12px;">√öltimo voto:</p><div style="background: rgba(255,255,255,0.1); border: 2px solid ' + victoryColor + '; padding: 16px; border-radius: 12px; text-align: center; font-size: 24px; font-weight: 900; color: ' + victoryColor + ';">' + votedPlayer + '</div></div>';
            
            // Mostrar la palabra
            html += '<div class="card" style="background: linear-gradient(135deg, #1e5a4f 0%, #1e3a8a 100%); border: 2px solid #10b981; margin-bottom: 20px; padding: 32px;"><div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 24px;"><div style="font-size: 32px;">üìù</div><h2 style="color: #34d399; margin: 0; font-size: 24px; font-weight: 700; text-transform: uppercase;">La Palabra Era</h2></div><div style="background: rgba(255, 255, 255, 0.95); padding: 40px 30px; border-radius: 20px; margin: 0 auto; max-width: 500px; box-shadow: 0 8px 32px rgba(0,0,0,0.3);"><div style="font-size: 64px; font-weight: 900; color: #10b981; text-align: center; line-height: 1.1;">' + game.gameData.word + '</div></div>';
            
            // Mostrar tripulantes
            html += '<div style="margin-top: 28px; padding-top: 24px; border-top: 2px solid rgba(16, 185, 129, 0.3);"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;"><span style="font-size: 20px;">‚úÖ</span><h3 style="color: #34d399; font-size: 18px; margin: 0; font-weight: 700;">Tripulantes:</h3></div><div style="display: flex; flex-wrap: wrap; gap: 10px;">';
            
            for (var j = 0; j < crewmates.length; j++) {
                html += '<span style="background: rgba(52, 211, 153, 0.25); border: 2px solid #10b981; padding: 10px 20px; border-radius: 12px; font-weight: 700; color: #34d399; font-size: 16px;">' + crewmates[j] + '</span>';
            }
            
            html += '</div></div></div>';
            
            // Mostrar impostor(es)
            html += '<div class="card" style="background: linear-gradient(135deg, #7f1d1d 0%, #450a0a 100%); border: 2px solid #ef4444; margin-bottom: 20px; padding: 32px;"><div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 24px;"><div style="font-size: 32px;">üî¥</div><h2 style="color: #fca5a5; margin: 0; font-size: 24px; font-weight: 700; text-transform: uppercase;">El Impostor' + (impostors.length > 1 ? 'es' : '') + '</h2></div><div style="display: flex; flex-direction: column; gap: 16px; align-items: center;">';
            
            for (var k = 0; k < impostors.length; k++) {
                html += '<div style="background: rgba(239, 68, 68, 0.3); border: 3px solid #ef4444; padding: 24px 48px; border-radius: 20px; font-size: 36px; font-weight: 900; color: #fca5a5; text-align: center; width: 100%; animation: pulse 2s infinite; box-shadow: 0 0 30px rgba(239, 68, 68, 0.4);">' + impostors[k] + '</div>';
            }
            
            html += '</div></div>';
            
            // Botones finales
            html += '<div class="ad-banner" style="margin-bottom: 20px;"><div style="font-size: 10px; color: #9ca3af; margin-bottom: 8px;">Publicidad</div><div class="ad-content"><p style="font-weight: 700;">üì± Banner</p></div></div><div style="display: flex; flex-direction: column; gap: 12px;"><button class="btn btn-primary" onclick="newRound()" style="font-size: 20px; padding: 20px;">üîÑ Nueva Ronda</button><button class="btn btn-secondary" onclick="resetGame()" style="font-size: 18px;">üè† Men√∫ Principal</button></div><div style="text-align: center; color: rgba(255,255,255,0.6); margin-top: 24px; font-size: 14px;"><p>Paquete: ' + game.gameData.pkg + '</p></div>';
            
            screen.innerHTML = html;
        }

        function revealAll() {
            var impostors = [];
            var crewmates = [];
            for (var i = 0; i < game.gameData.roles.length; i++) {
                if (game.gameData.roles[i].isImpostor) {
                    impostors.push(game.gameData.roles[i].name);
                } else {
                    crewmates.push(game.gameData.roles[i].name);
                }
            }
            
            var screen = document.getElementById('playing');
            screen.innerHTML = '<div style="text-align: center; margin-bottom: 30px;"><div style="font-size: 64px; margin-bottom: 16px;">üé≠</div><h1 style="color: white; font-size: 36px; font-weight: 900; text-transform: uppercase; letter-spacing: 2px;">Revelaci√≥n Final</h1></div><div class="card" style="background: linear-gradient(135deg, #1e5a4f 0%, #1e3a8a 100%); border: 2px solid #10b981; margin-bottom: 20px; padding: 32px;"><div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 24px;"><div style="font-size: 32px;">üìù</div><h2 style="color: #34d399; margin: 0; font-size: 24px; font-weight: 700; text-transform: uppercase;">La Palabra Era</h2></div><div style="background: rgba(255, 255, 255, 0.95); padding: 40px 30px; border-radius: 20px; margin: 0 auto; max-width: 500px; box-shadow: 0 8px 32px rgba(0,0,0,0.3);"><div style="font-size: 64px; font-weight: 900; color: #10b981; text-align: center; line-height: 1.1;">' + game.gameData.word + '</div></div><div style="margin-top: 28px; padding-top: 24px; border-top: 2px solid rgba(16, 185, 129, 0.3);"><div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;"><span style="font-size: 20px;">‚úÖ</span><h3 style="color: #34d399; font-size: 18px; margin: 0; font-weight: 700;">Tripulantes:</h3></div><div style="display: flex; flex-wrap: wrap; gap: 10px;">';
            
            for (var j = 0; j < crewmates.length; j++) {
                screen.innerHTML += '<span style="background: rgba(52, 211, 153, 0.25); border: 2px solid #10b981; padding: 10px 20px; border-radius: 12px; font-weight: 700; color: #34d399; font-size: 16px;">' + crewmates[j] + '</span>';
            }
            
            screen.innerHTML += '</div></div></div><div class="card" style="background: linear-gradient(135deg, #7f1d1d 0%, #450a0a 100%); border: 2px solid #ef4444; margin-bottom: 20px; padding: 32px;"><div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 24px;"><div style="font-size: 32px;">üî¥</div><h2 style="color: #fca5a5; margin: 0; font-size: 24px; font-weight: 700; text-transform: uppercase;">El Impostor' + (impostors.length > 1 ? 'es' : '') + '</h2></div><div style="display: flex; flex-direction: column; gap: 16px; align-items: center;">';
            
            for (var k = 0; k < impostors.length; k++) {
                screen.innerHTML += '<div style="background: rgba(239, 68, 68, 0.3); border: 3px solid #ef4444; padding: 24px 48px; border-radius: 20px; font-size: 36px; font-weight: 900; color: #fca5a5; text-align: center; width: 100%; animation: pulse 2s infinite; box-shadow: 0 0 30px rgba(239, 68, 68, 0.4);">' + impostors[k] + '</div>';
            }
            
            screen.innerHTML += '</div></div><div class="ad-banner" style="margin-bottom: 20px;"><div style="font-size: 10px; color: #9ca3af; margin-bottom: 8px;">Publicidad</div><div class="ad-content"><p style="font-weight: 700;">üì± Banner</p></div></div><div style="display: flex; flex-direction: column; gap: 12px;"><button class="btn btn-primary" onclick="newRound()" style="font-size: 20px; padding: 20px;">üîÑ Nueva Ronda</button><button class="btn btn-secondary" onclick="resetGame()" style="font-size: 18px;">üè† Men√∫ Principal</button></div><div style="text-align: center; color: rgba(255,255,255,0.6); margin-top: 24px; font-size: 14px;"><p>Paquete: ' + game.gameData.pkg + '</p></div>';
        }

        function newRound() {
            game.currentIndex = 0;
            game.revealed = false;
            game.eliminated = [];
            startGame();
        }

        function resetGame() {
            game.players = [];
            game.selected = null;
            game.gameData = null;
            game.currentIndex = 0;
            game.revealed = false;
            game.eliminated = [];
            document.body.style.background = 'linear-gradient(135deg, #1a0a1e, #2d1b3d, #4a1942)';
            goTo('home');
        }

        document.getElementById('nameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addPlayer();
            }
        });

        window.onload = function() {
            renderPackages();
        };
    </script>
</body>
</html>
